Weâ€™ll create a role that collects important system configs (like /etc/hosts, /etc/passwd) from all servers and saves them to the Ansible controller.
ðŸ”¹ Project Structure
collect_configs_and_logs/
â”œâ”€â”€ playbook.yml
â”œâ”€â”€ roles/
â”‚   â””â”€â”€ collect/
â”‚       â”œâ”€â”€ tasks/
â”‚       â”‚   â””â”€â”€ main.yml
â”‚       â””â”€â”€ files/   (not used, but kept for role structure)


ðŸ”¹ What Happens When You Run It?
Ansible connects to each server.
Reads /etc/hosts and /etc/passwd (as base64).
Decodes and writes them locally into ./collected/<hostname>/.
Example output on controller:

collected/
â”œâ”€â”€ server1/
â”‚   â”œâ”€â”€ etc_hosts.txt
â”‚   â””â”€â”€ etc_passwd.txt
â”œâ”€â”€ server2/
â”‚   â”œâ”€â”€ etc_hosts.txt
â”‚   â””â”€â”€ etc_passwd.txt

ðŸ”¹ Real-World Use Cases

âœ… Centralized audit of configs.
âœ… Backup before patching.
âœ… Compliance checks across servers.
